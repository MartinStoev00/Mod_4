<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<link rel="stylesheet" href="main.css">
	<link rel="stylesheet" href="../fontawesome-free-5.13.0-web/css/all.min.css">
</head>
<body>
	<div class="header">
		<img class="header__logo" src="../Pictures/website_icon.png" alt="">
		<form class="form" action="#">
			<input class="form__search" type="text" placeholder="Search...">
			<div class="dropdown"></div>
			<button class="form__btn  fa fa-search" type="submit"></button>
		</form>
		<div class="header__buttons">
			<button class="header__myProfile fas fa-user-circle"></button>
			<button class="header__notify fas fa-bell"></button>
		</div>
	</div>
	<div class="main">
		
	</div>
</body>
<script>
	let icons = document.getElementsByClassName("fas");
	Array.prototype.forEach.call(icons, (icon) => {
		icon.addEventListener("click", () => {
			icon.style.marginBottom = "-7px";
			setTimeout(() => {
				icon.style.marginBottom = "0px";
			}, 200);
		})
	});

	let searchInput  = document.getElementsByClassName("form__search")[0];
	let searchIcon = document.getElementsByClassName("form__btn")[0];
	let dropdown = document.getElementsByClassName("dropdown")[0];
	let yInput = Math.ceil(window.pageYOffset + searchInput.getBoundingClientRect().top) + 3.5;
	let xInput   =  Math.ceil(searchInput.getBoundingClientRect().left) + 5;
	let inputWidth =  Math.ceil(searchInput.getBoundingClientRect().width);
	let inputWHeight =  Math.ceil(searchInput.getBoundingClientRect().height);
	dropdown.style.top = (yInput - 3.5 + inputWHeight) + "px";
	searchIcon.style.top = yInput + "px";
	searchIcon.style.left  = xInput + "px";
	dropdown.style.width = (inputWidth - 1) + "px";
	dropdown.style.left= (xInput - 6) + "px"
	
	searchInput.addEventListener("focus", () => {
		searchInput.style.backgroundColor = "#fff";
		searchInput.style.border = ".5px solid #ddd";
		searchInput.style.borderRadius = "8px 8px 0px 0px";
		dropdown.style.display = "block";
		fillTable(searchInput.value.toLowerCase());
	});
	searchInput.addEventListener("blur", () => {
		setTimeout(() => {
			if(document.activeElement.className !=="dropdown__item") {
				searchInput.style.backgroundColor = "rgb(241, 242, 243)";
				searchInput.style.border = ".5px solid #fff";
				searchInput.style.borderRadius = "8px";
				dropdown.style.display = "none";
			}
		}, 10);
	});

	let items = [
		{
			name: "Joe",
			description: "None",
			img: "1.jpg"
		},
		{
			name: "Monica",
			description: "None",
			img: "2.jpg"
		},
		{
			name: "Wishal",
			description: "None",
			img: "3.jpg"
		},
		{
			name: "Joe",
			description: "None",
			img: "1.jpg"
		},
		{
			name: "Mohammad",
			description: "None",
			img: "4.jpg" 
		},
		{
			name: "Omar",
			description: "None",
			img: "5.jpg" 
		},
		{
			name: "Hamza",
			description: "None",
			img: "6.jpg" 
		},
		{
			name: "Joe",
			description: "None",
			img: "1.jpg"
		},
		{
			name: "Joe",
			description: "None",
			img: "1.jpg"
		},
		{
			name: "Joe",
			description: "None",
			img: "1.jpg"
		},
		{
			name: "Joe",
			description: "None",
			img: "1.jpg"
		},
	];

	function fillTable(input) {
		let output = ``;
		let newArr = items.filter((item) => {
	  		if(input == "") {
	  			return true;
	  		} else {
	  			return item.name.toLowerCase().includes(input) || input.includes(item.name.toLowerCase());
	  		}
		}).slice(0, 5);
		if(newArr.length == 0) {
			output = `<div class="dropdown__item" style="color: #555">No results found</div>`;
		} else {
			newArr.forEach((item) => {
				let {name, description, img} = item;
				output +=
				`<a class="dropdown__item" href="${img}">
					<div style="background-image: url(${img});" class="dropdown__img"></div>
					<div class="dropdown__container">
						<p class="dropdown__name">${name}</p>
						<p class="dropdown__description">${description}</p>
					</div>
				</a>`;
			});
		}
		dropdown.innerHTML = output;
	}

	searchInput.addEventListener("keyup", (e) => {
		fillTable(searchInput.value.toLowerCase());
	});


</script>
</html>